[{"C:\\Users\\DellTekne\\Documents\\projects\\map-manado-remake\\src\\reportWebVitals.ts":"1","C:\\Users\\DellTekne\\Documents\\projects\\map-manado-remake\\src\\App.tsx":"2","C:\\Users\\DellTekne\\Documents\\projects\\map-manado-remake\\src\\components\\Snapshots.tsx":"3","C:\\Users\\DellTekne\\Documents\\projects\\map-manado-remake\\src\\components\\NeighborCard.tsx":"4","C:\\Users\\DellTekne\\Documents\\projects\\map-manado-remake\\src\\index.tsx":"5","C:\\Users\\DellTekne\\Documents\\projects\\map-manado-remake\\src\\components\\SelectedRegionModal.tsx":"6","C:\\Users\\DellTekne\\Documents\\projects\\map-manado-remake\\src\\components\\Regions.tsx":"7","C:\\Users\\DellTekne\\Documents\\projects\\map-manado-remake\\src\\components\\DistrictCard.tsx":"8","C:\\Users\\DellTekne\\Documents\\projects\\map-manado-remake\\src\\components\\LoadingBox.tsx":"9","C:\\Users\\DellTekne\\Documents\\projects\\map-manado-remake\\src\\components\\Map.tsx":"10","C:\\Users\\DellTekne\\Documents\\projects\\map-manado-remake\\src\\contexts\\ModalSnapshotContext.tsx":"11"},{"size":440,"mtime":1614187750449,"results":"12","hashOfConfig":"13"},{"size":3204,"mtime":1614187750437,"results":"14","hashOfConfig":"13"},{"size":6731,"mtime":1614241294129,"results":"15","hashOfConfig":"13"},{"size":1312,"mtime":1614187750441,"results":"16","hashOfConfig":"13"},{"size":933,"mtime":1614187750448,"results":"17","hashOfConfig":"13"},{"size":608,"mtime":1614187750442,"results":"18","hashOfConfig":"13"},{"size":3984,"mtime":1614187750441,"results":"19","hashOfConfig":"13"},{"size":2332,"mtime":1614187750438,"results":"20","hashOfConfig":"13"},{"size":611,"mtime":1614187750440,"results":"21","hashOfConfig":"13"},{"size":1492,"mtime":1614240382535,"results":"22","hashOfConfig":"13"},{"size":1218,"mtime":1614187750446,"results":"23","hashOfConfig":"13"},{"filePath":"24","messages":"25","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"hv6kut",{"filePath":"26","messages":"27","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"28","messages":"29","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"30","messages":"31","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"32","messages":"33","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"34"},{"filePath":"35","messages":"36","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"37","messages":"38","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"39","usedDeprecatedRules":"34"},{"filePath":"40","messages":"41","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"42","messages":"43","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"34"},{"filePath":"44","messages":"45","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"46","messages":"47","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"C:\\Users\\DellTekne\\Documents\\projects\\map-manado-remake\\src\\reportWebVitals.ts",[],"C:\\Users\\DellTekne\\Documents\\projects\\map-manado-remake\\src\\App.tsx",[],"C:\\Users\\DellTekne\\Documents\\projects\\map-manado-remake\\src\\components\\Snapshots.tsx",[],"C:\\Users\\DellTekne\\Documents\\projects\\map-manado-remake\\src\\components\\NeighborCard.tsx",[],"C:\\Users\\DellTekne\\Documents\\projects\\map-manado-remake\\src\\index.tsx",[],["48","49"],"C:\\Users\\DellTekne\\Documents\\projects\\map-manado-remake\\src\\components\\SelectedRegionModal.tsx",["50"],"C:\\Users\\DellTekne\\Documents\\projects\\map-manado-remake\\src\\components\\Regions.tsx",["51"],"import { ReactElement, FC, useState, useEffect, useCallback, useContext, useMemo } from 'react'\r\nimport { List, Input, Divider } from 'antd'\r\nimport { LoadingOutlined } from '@ant-design/icons'\r\nimport { bbox, difference, polygon } from '@turf/turf'\r\nimport { Connection } from '../modules/Connection'\r\nimport { DistrictCard } from './DistrictCard'\r\nimport { FocusedRegion } from '../App'\r\nimport { MapInstance } from '../contexts/MapInstanceContext'\r\n\r\nexport interface District {\r\n    id: number;\r\n    name: string;\r\n    subdistricts: Subdistrict[];\r\n}\r\n\r\nexport interface Subdistrict {\r\n    id: number;\r\n    name: string;\r\n    neighbors: Neighbor[];\r\n    district_id: number;\r\n}\r\n\r\nexport interface Neighbor {\r\n    id: number;\r\n    name: string;\r\n    subdistrict_id: number;\r\n    district_id: number;\r\n}\r\n\r\nexport const Regions: FC = (): ReactElement => {\r\n    const [regions, setRegions] = useState<District[]>([]);\r\n    const [loading, toggleLoading] = useState<boolean>(true);\r\n    const [filter, setFilter] = useState('');\r\n    const { data } = useContext(FocusedRegion);\r\n    const { map } = useContext(MapInstance);\r\n\r\n    const getRegions = useCallback(() => {\r\n        toggleLoading(true);\r\n        Connection.get(`/apis/districts`).then((res) => {\r\n            toggleLoading(false);\r\n            setRegions((res.data.data as District[]));\r\n        }).catch(e => {\r\n            console.log(e)\r\n        })\r\n    }, []);\r\n\r\n    useEffect(() => {\r\n        getRegions();\r\n    }, [getRegions]);\r\n\r\n    const focusRegion = useCallback(() => {\r\n        if (typeof data !== 'undefined' && typeof map !== 'undefined') {\r\n            // const line = multiLineString(data.geometry.coordinates);\r\n            const boundingBox = bbox(data.geometry);\r\n            // @ts-ignore\r\n            map.fitBounds(boundingBox, { padding: 30 });\r\n            const earthSource = map.getSource(`earth`);\r\n            const earthLayer = map.getLayer(`earth`);\r\n\r\n            if (typeof earthSource !== 'undefined' && typeof earthLayer !== 'undefined') {\r\n                map.removeLayer(`earth`);\r\n                map.removeSource(`earth`);\r\n            }\r\n\r\n            const diff = difference({\r\n                type: 'Polygon',\r\n                coordinates: [\r\n                    [\r\n                        // [\r\n                        [-85.1054596961173, -180].reverse(),\r\n                        [85.1054596961173, -180].reverse(),\r\n                        [85.1054596961173, 180].reverse(),\r\n                        [-85.1054596961173, 180].reverse(),\r\n                        [-85.1054596961173, 0].reverse(),\r\n                        // ]\r\n                    ]\r\n                ]\r\n                // @ts-ignore\r\n            }, data.geometry);\r\n            map.addSource(`earth`, {\r\n                type: 'geojson',\r\n                // @ts-ignore\r\n                data: diff\r\n            });\r\n            map.addLayer({\r\n                id: `earth`,\r\n                type: 'fill',\r\n                source: `earth`,\r\n                layout: {},\r\n                paint: {\r\n                    'fill-color': '#000',\r\n                    'fill-opacity': 0.6\r\n                }\r\n            });\r\n        }\r\n    }, [data, map]);\r\n\r\n    useEffect(() => {\r\n        typeof data !== 'undefined' && focusRegion();\r\n    }, [data, focusRegion]);\r\n\r\n    const filteredRegions = useMemo(() => (\r\n        regions.filter(district => (district.name.toLowerCase().match(filter.toLowerCase())))\r\n    ), [regions, filter])\r\n\r\n    return (\r\n        <>\r\n            <Input.Search onChange={e => setFilter(e.target.value)} value={filter} placeholder=\"Cari Kecamatan\" />\r\n            <Divider />\r\n            <List loading={{ indicator: <LoadingOutlined spin />, size: 'large', tip: 'Mengakses data wilayah', spinning: loading }} dataSource={filteredRegions} renderItem={(district) => (\r\n                <DistrictCard district={district} />\r\n            )} rowKey={item => `${item.id}`} />\r\n        </>\r\n    )\r\n}\r\n","C:\\Users\\DellTekne\\Documents\\projects\\map-manado-remake\\src\\components\\DistrictCard.tsx",[],"C:\\Users\\DellTekne\\Documents\\projects\\map-manado-remake\\src\\components\\LoadingBox.tsx",[],"C:\\Users\\DellTekne\\Documents\\projects\\map-manado-remake\\src\\components\\Map.tsx",[],"C:\\Users\\DellTekne\\Documents\\projects\\map-manado-remake\\src\\contexts\\ModalSnapshotContext.tsx",[],{"ruleId":"52","replacedBy":"53"},{"ruleId":"54","replacedBy":"55"},{"ruleId":"56","severity":1,"message":"57","line":1,"column":28,"nodeType":"58","messageId":"59","endLine":1,"endColumn":37},{"ruleId":"56","severity":1,"message":"60","line":4,"column":28,"nodeType":"58","messageId":"59","endLine":4,"endColumn":35},"no-native-reassign",["61"],"no-negated-in-lhs",["62"],"@typescript-eslint/no-unused-vars","'useEffect' is defined but never used.","Identifier","unusedVar","'polygon' is defined but never used.","no-global-assign","no-unsafe-negation"]